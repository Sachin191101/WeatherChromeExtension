window.onload=async function(){var e;await chrome.storage.sync.get(["city","state","temp-current-value","temp-high-value","temp-unit","period","weather-description","wind-speed","wind-direction","hourly-data"],function(e){document.getElementById("city").innerText=e.city||"",document.getElementById("temp-current-value").innerText=e["temp-current-value"]||"",document.getElementById("wind-direction").innerText=e["wind-direction"]||"",document.getElementById("wind-speed").innerText=e["wind-speed"]||"",document.getElementById("temp-high-value").innerText=e["temp-high-value"]||"",document.getElementById("temp-unit").innerText=e["temp-unit"]||"",document.getElementById("weather-description").innerText=e["weather-description"]||"",document.getElementById("hourly").innerHTML=e["hourly-data"]});navigator.geolocation.getCurrentPosition(async function(t){e=t;var n=await fetch(`https://api.weather.gov/points/${e.coords.latitude},${e.coords.longitude}`,{headers:{"User-Agent":"podiumbot chrome extension"}}).then(e=>e.json()),o=await fetch(`https://api.weather.gov/points/${e.coords.latitude},${e.coords.longitude}/stations`,{headers:{"User-Agent":"podiumbot chrome extension"}}).then(e=>e.json());console.log(o.features[0].id);var r=`${o.features[0].id}/observations/latest`,i=await fetch(r,{headers:{"User-Agent":"podiumbot chrome extension"}}).then(e=>e.json()),s=Math.round(10*(i.properties.temperature.value/5*9+32))/10;document.getElementById("temp-current-value").innerText=s,document.getElementById("city").innerText=n.properties.relativeLocation.properties.city,console.log(n);var d=await fetch(n.properties.forecast,{headers:{"User-Agent":"podiumbot chrome extension"}}).then(e=>e.json()),p=await fetch(n.properties.forecastHourly,{headers:{"User-Agent":"podiumbot chrome extension"}}).then(e=>e.json());console.log(p),console.log(d);for(var a="",c=0;c<10;c++){var u=p.properties.periods[c];a+=`<span class="hourly-card"><h3 class="hourly-card-time">${new Date(u.startTime).toLocaleString("en-US",{hour:"numeric",hour12:!0})}</h3><p><strong><span class="hourly-card-temp">${u.temperature}</span></strong> ${u.temperatureUnit}</p></span>`}document.getElementById("hourly").innerHTML=a,document.getElementById("wind-direction").innerText=d.properties.periods[0].windDirection,document.getElementById("wind-speed").innerText=d.properties.periods[0].windSpeed,document.getElementById("temp-high-value").innerText=d.properties.periods[0].temperature,document.getElementById("temp-unit").innerText=d.properties.periods[0].temperatureUnit,document.getElementById("weather-description").innerText=d.properties.periods[0].detailedForecast,chrome.storage.sync.set({city:n.properties.relativeLocation.properties.city,state:n.properties.relativeLocation.properties.state,"wind-speed":d.properties.periods[0].windSpeed,"wind-direction":d.properties.periods[0].windDirection,"temp-current-value":s,"temp-high-value":d.properties.periods[0].temperature,"temp-unit":d.properties.periods[0].temperatureUnit,period:d.properties.periods[0].name,"weather-description":d.properties.periods[0].detailedForecast,"hourly-data":a},function(){console.log("new weather data set!")})});const t=document.getElementById("hourly");t.style.cursor="grab";let n={top:0,left:0,x:0,y:0};const o=function(e){const o=e.clientX-n.x,r=e.clientY-n.y;t.scrollTop=n.top-r,t.scrollLeft=n.left-o},r=function(){t.style.removeProperty("user-select"),document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",r)};t.addEventListener("mousedown",function(e){t.style.userSelect="none",n={left:t.scrollLeft,top:t.scrollTop,x:e.clientX,y:e.clientY},document.addEventListener("mousemove",o),document.addEventListener("mouseup",r)})};